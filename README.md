### power switchbox
#### 2023/03/17 6

USB-Cでデバイスを接続すると、電源の供給を適当にネゴって、電源供給できるデバイス
が電力を供給して、電源を使いたいデバイスが電力を消費します。そんなイメージで、
電力を供給するデバイスと電力を消費するデバイスをマッチングさせるハブのような装
置を考えてみます。

とりあえず、ポートはA, B, C, Dの4つで、各ポートの状態として、OFF、POWER_IN、
POWER_OUTの3状態を考えます。ハブは、これらのポートの状態に応じて、電力供給ラ
インの結線を自動的に構成して、POWER_IN状態のポートからPOWER_OUT状態のポート
に電力を供給させます。1つのPOWER_INポートで、0個以上のPOWER_OUTポートに電力
を供給できることとします。

ただし、安全のための要件として、電力を供給するデバイス（POWER_INのポート）同士
を接続すると相互干渉するので避けなければなりません。例えば、ポートAがPOWER_IN
で、ポートBがPOWER_OUT、ポートCがPOWER_IN、ポートDがOFFの場合には、ハブは
ポートAとポートBを接続して、ポートCとポートDはいずれも孤立させておくことで、出
力の干渉なしに、電力を必要とするポートに電力を供給することができます。あるいは、
ポートAとポートDを接続、ポートBとポートCを接続しても、安全に電力を供給できます。
他にも、許される結線パターンはいくつかありまが、どれにするかは任意とします。
